(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{152:function(e,t,a){e.exports=a(183)},157:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),i=(a(157),a(140)),u=a(14),o=a(212),d=a(219),s=a(220),m=a(215),b=a(217),f=a(221),E=a(23),p=function(e){return e.employees.allIds},h=function(e){return e.employees.selectedId?e.employees.byId[e.employees.selectedId]:null},y=a(218),O=a(134),v=a.n(O),j=a(133),x=a.n(j),N=function(){return Object(E.b)()},I=a(76),D=a(7),P=a(129),A=a.n(P).a.create({baseURL:"http://localhost:8080"}),L=a(143),S=a(141),_=function e(t){var a=this;Object(I.a)(this,e),this.path=void 0,this.findAll=function(){return A.get(a.path)},this.findById=function(e){return A.get("".concat(a.path,"/").concat(e))},this.path=t},B=function(e){Object(L.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).create=function(t){return A.post(e.path,t)},e.updateById=function(t,a){return A.put("".concat(e.path,"/").concat(t),a)},e.deleteById=function(t){return A.delete("".concat(e.path,"/").concat(t))},e}return a}(_),g=function(e){var t=e.job;return t||(t={id:-1,name:""}),Object(D.a)(Object(D.a)({},e),{},{job:t})},T=function(e){return e.data.id?Object(D.a)(Object(D.a)({},e),{},{data:g(e.data)}):Object(D.a)(Object(D.a)({},e),{},{data:e.data.map(g)})},M=new function e(){var t=this;Object(I.a)(this,e),this.baseService=new B("/employees"),this.findAll=function(){return t.baseService.findAll().then(T)},this.findById=function(e){return t.baseService.findById(e).then(T)},this.create=function(e){return t.baseService.create(e).then(T)},this.updateById=function(e,a){return t.baseService.updateById(e,a).then(T)},this.deleteById=this.baseService.deleteById,this.isAhvNumberAvailable=function(e,t){var a="/employees/exists?ahvNumber=".concat(e);return t&&(a+="&excludeId=".concat(t)),A.get(a).then((function(e){return!e.data}))},this.isPersonalNumberAvailable=function(e,t){var a="/employees/exists?personalNumber=".concat(e);return t&&(a+="&excludeId=".concat(t)),A.get(a).then((function(e){return!e.data}))}},w=a(78),k=a.n(w),Y={id:void 0,name:"-",description:"-"},q={id:void 0,name:"-"},C=Object(o.a)((function(e){return{editButton:{},deleteButton:{color:e.palette.error.main}}})),R=function(e){var t=C(),a=Object(E.c)(function(e){return function(t){return t.employees.byId[e.id]}}(e)),n=a.id,l=a.firstName,c=a.lastName,i=a.email,u=a.ahvNumber,o=a.birthDate,d=a.personalNumber,s=a.department,f=(s=void 0===s?q:s).name,p=a.job,h=(p=void 0===p?Y:p).name,O=p.description,j=N();return r.a.createElement(m.a,null,r.a.createElement(b.a,null,l),r.a.createElement(b.a,null,c),r.a.createElement(b.a,null,i),r.a.createElement(b.a,null,u),r.a.createElement(b.a,null,k()(o).format("DD.MM.YYYY")),r.a.createElement(b.a,null,d),r.a.createElement(b.a,null,f),r.a.createElement(b.a,null,h),r.a.createElement(b.a,null,O),r.a.createElement(b.a,null,r.a.createElement(y.a,{title:"Edit",className:t.editButton,size:"small",onClick:function(){j(function(e){return{type:"EDIT_EMPLOYEE",payload:{id:e}}}(n))}},r.a.createElement(x.a,null)),r.a.createElement(y.a,{title:"Delete",className:t.deleteButton,size:"small",onClick:function(){j(function(e){return function(t){return M.deleteById(e).then((function(){t(function(e){return{type:"DELETE_EMPLOYEE",payload:{id:e}}}(e))}))}}(n))}},r.a.createElement(v.a,null))))},J=Object(o.a)((function(e){return{headerCell:{fontWeight:e.typography.fontWeightBold}}})),V=["Firstname","Lastname","Email","AHV Nr.","Birthdate","Personal Nr.","Department","Job","Job Description"],F=function(){var e=J(),t=Object(E.c)(p),a=N();return Object(n.useEffect)((function(){a((function(e,t){return t().employees.loaded?Promise.resolve():M.findAll().then((function(e){return e.data})).then((function(t){e(function(e){return{type:"LOAD_EMPLOYEES",payload:{employees:e}}}(t))}))}))}),[a]),r.a.createElement(d.a,null,r.a.createElement(s.a,null,r.a.createElement(m.a,null,V.map((function(t){return r.a.createElement(b.a,{key:t,className:e.headerCell},t)})),r.a.createElement(b.a,null))),r.a.createElement(f.a,null,t.map((function(e){return r.a.createElement(R,{id:e,key:e})}))))},U=a(228),H=a(101),W=a(227),z=a(138),X=a.n(z),$=a(231),G=a(233),K=a(224),Q=a(225),Z=a(226),ee=a(52),te=a(84),ae=a.n(te),ne=a(110),re=a(31),le=function(e){return re.b({firstName:re.c().required("Required"),lastName:re.c().required("Required"),email:re.c().email("Must be a valid email"),ahvNumber:re.c().required("Required").matches(/^[0-9]{3}\.[0-9]{4}\.[0-9]{4}\.[0-9]{2}$/,"Must be of format xxx.xxxx.xxxx.xx").test("ahvNumberTest","AHV Nr. is already in use",function(){var t=Object(ne.a)(ae.a.mark((function t(a){return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=4;break}return t.next=3,M.isAhvNumberAvailable(a,e);case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),birthDate:re.c().required("Required").test("birthDateTest","Must be in the past",(function(e){return!!e&&k()(e).isBefore(k()())})),personalNumber:re.c().required("Required").test("personalNumberTest","Personal Nr. is already in use",function(){var t=Object(ne.a)(ae.a.mark((function t(a){return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=4;break}return t.next=3,M.isPersonalNumberAvailable(a,e);case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),department:re.b({id:re.a().notOneOf([-1],"Required")}).required("Required"),job:re.b({id:re.c().required()})})},ce=a(223),ie=a(232),ue=new _("/departments"),oe=function(){var e=Object(E.c)((function(e){return e.departments.all})),t=N();return Object(n.useEffect)((function(){t((function(e,t){return t().departments.loaded?Promise.resolve():ue.findAll().then((function(e){return e.data})).then((function(t){e(function(e){return{type:"LOAD_DEPARTMENTS",payload:{departments:e}}}(t))}))}))}),[t]),e},de=new _("/jobs"),se=function(){var e=Object(E.c)((function(e){return e.jobs.all})),t=N();return Object(n.useEffect)((function(){t((function(e,t){return t().jobs.loaded?Promise.resolve():de.findAll().then((function(e){return e.data})).then((function(t){e(function(e){return{type:"LOAD_JOBS",payload:{jobs:e}}}(t))}))}))}),[t]),e},me=a(229),be=function(e){var t=Object(ee.c)(e),a=Object(H.a)(t,2),n=a[0],l=a[1],c=l.touched&&l.error?l.error:void 0;return r.a.createElement(me.a,Object.assign({},e,n,{error:!!c,helperText:c||e.helperText}))};be.defaultProps={variant:"outlined",fullWidth:!0,color:"primary"};var fe=be,Ee=function(){var e=oe(),t=se();return r.a.createElement(ce.a,{container:!0,direction:"row",spacing:2},r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"firstName",label:"Firstname",autoFocus:!0})),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"lastName",label:"Lastname"})),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"email",label:"Email",type:"email"})),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"ahvNumber",label:"AHV Nr.",helperText:"Format: xxx.xxxx.xxxx.xx"})),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"birthDate",label:"Birth date",type:"date",InputLabelProps:{shrink:!0}})),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"personalNumber",label:"Personal Nr."})),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"department.id",label:"Department",select:!0},r.a.createElement(ie.a,{value:-1,disabled:!0},r.a.createElement("em",null,"Please select")),e.map((function(e){return r.a.createElement(ie.a,{key:e.id,value:e.id},e.name)})))),r.a.createElement(ce.a,{item:!0,xs:12},r.a.createElement(fe,{name:"job.id",label:"Job",select:!0},r.a.createElement(ie.a,{value:-1},r.a.createElement("em",null,"No job")),t.map((function(e){return r.a.createElement(ie.a,{key:e.id,value:e.id},e.name)})))))},pe=Object(o.a)((function(e){return{actions:{padding:e.spacing(1,3)}}})),he={id:void 0,firstName:"",lastName:"",email:"",ahvNumber:"",birthDate:void 0,personalNumber:"",department:{id:-1,name:""},job:{id:-1,name:""}},ye=function(e){var t=e.onClose,a=pe(),n=N();return r.a.createElement($.a,e,r.a.createElement(G.a,null,"Create new employee"),r.a.createElement(ee.b,{initialValues:he,onSubmit:function(e){n(function(e){return function(t){return M.create(e).then((function(e){return e.data})).then((function(e){t(function(e){return{type:"ADD_EMPLOYEE",payload:{employee:e}}}(e))})).catch((function(e){return console.error(e.response)}))}}(e)),t()},validationSchema:le()},r.a.createElement(ee.a,null,r.a.createElement(K.a,null,r.a.createElement(Ee,null)),r.a.createElement(Q.a,{className:a.actions},r.a.createElement(Z.a,{color:"primary",variant:"outlined",onClick:t},"Cancel"),r.a.createElement(Z.a,{color:"primary",variant:"contained",type:"submit"},"Save")))))},Oe=Object(o.a)((function(e){return{root:{display:"flex"},addButton:{color:e.palette.success.main}}})),ve=function(){var e=Oe(),t=Object(n.useState)(!1),a=Object(H.a)(t,2),l=a[0],c=a[1];return r.a.createElement(n.Fragment,null,r.a.createElement(W.a,{className:e.root},r.a.createElement(y.a,{title:"New Employee",className:e.addButton,onClick:function(){return c(!0)}},r.a.createElement(X.a,null))),r.a.createElement(ye,{open:l,onClose:function(){return c(!1)}}))},je=Object(o.a)((function(e){return{actions:{padding:e.spacing(1,3)}}})),xe=function(){var e=je(),t=N(),a=Object(E.c)(h),n=function(){t({type:"STOP_EDIT_EMPLOYEE"})};return a?r.a.createElement($.a,{open:!0,onClose:n},r.a.createElement(G.a,null,"Edit ",a.firstName," ",a.lastName),r.a.createElement(ee.b,{initialValues:a,onSubmit:function(e){t(function(e){return function(t){return M.updateById(e.id,e).then((function(e){return e.data})).then((function(e){t(function(e,t){return{type:"UPDATE_EMPLOYEE",payload:{id:e,employee:t}}}(e.id,e))})).catch((function(e){return console.error(e.response)}))}}(e)).then(n)},validationSchema:le(a.id)},r.a.createElement(ee.a,null,r.a.createElement(K.a,null,r.a.createElement(Ee,null)),r.a.createElement(Q.a,{className:e.actions},r.a.createElement(Z.a,{onClick:n,variant:"outlined",color:"primary"},"Cancel"),r.a.createElement(Z.a,{type:"submit",variant:"contained",color:"primary"},"Save"))))):null},Ne=function(){return r.a.createElement(U.a,null,r.a.createElement(ve,null),r.a.createElement(F,null),r.a.createElement(xe,null))},Ie=a(47),De=a(139),Pe=a(77),Ae=a(142),Le=function(e){var t={};return e.forEach((function(e){t[e.id]=e})),{byId:t,allIds:e.map((function(e){return e.id}))}},Se={byId:{},allIds:[],selectedId:void 0,loaded:!1},_e=function(e,t){var a=Object(D.a)({},e.byId);return delete a[t],Object(D.a)(Object(D.a)({},e),{},{byId:a,allIds:e.allIds.filter((function(e){return e!==t}))})},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_EMPLOYEES":return Object(D.a)(Object(D.a)(Object(D.a)({},e),Le(t.payload.employees)),{},{loaded:!0});case"ADD_EMPLOYEE":return Object(D.a)(Object(D.a)({},e),{},{allIds:[].concat(Object(Ae.a)(e.allIds),[t.payload.employee.id]),byId:Object(D.a)(Object(D.a)({},e.byId),{},Object(Pe.a)({},t.payload.employee.id,t.payload.employee))});case"UPDATE_EMPLOYEE":return Object(D.a)(Object(D.a)({},e),{},{byId:Object(D.a)(Object(D.a)({},e.byId),{},Object(Pe.a)({},t.payload.id,t.payload.employee))});case"EDIT_EMPLOYEE":return Object(D.a)(Object(D.a)({},e),{},{selectedId:t.payload.id});case"STOP_EDIT_EMPLOYEE":return Object(D.a)(Object(D.a)({},e),{},{selectedId:void 0});case"DELETE_EMPLOYEE":return _e(e,t.payload.id);default:return e}},ge={all:[],loaded:!1},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DEPARTMENTS":return Object(D.a)(Object(D.a)({},e),{},{all:t.payload.departments,loaded:!0});default:return e}},Me={all:[],loaded:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_JOBS":return Object(D.a)(Object(D.a)({},e),{},{all:t.payload.jobs,loaded:!0});default:return e}},ke=Object(Ie.c)({employees:Be,departments:Te,jobs:we}),Ye=[De.a],qe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ie.d,Ce=Object(Ie.e)(ke,qe(Ie.a.apply(void 0,Ye))),Re=function(){return r.a.createElement(E.a,{store:Ce},r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"",component:Ne}))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.8770fe17.chunk.js.map